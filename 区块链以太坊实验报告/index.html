<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.48" />


<title>åŒºå—é“¾ä»¥å¤ªåŠå®éªŒæŠ¥å‘Š - SYSUcarey</title>
<meta property="og:title" content="åŒºå—é“¾ä»¥å¤ªåŠå®éªŒæŠ¥å‘Š - SYSUcarey">



  






<link rel="stylesheet" href="https://sysucarey.github.io/css/main.css" media="all">
<link rel="stylesheet" href="https://sysucarey.github.io/css/fonts.css">

  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="https://sysucarey.github.io/" class="nav-logo">
    <img src="https://sysucarey.github.io/images/logo.png" 
         width="50" 
         height="50" 
         alt="Logo">
  </a>
  <ul>
    <a>SYSUcarey</a>
  </ul>
  <ul class="nav-links">
    
    <li><a href="/categories">Categories</a></li>
    
    <li><a href="/tags">Tags</a></li>
    
    <li><a href="/about/">About</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">
  <article class="article">
    <h1 class="article-title">åŒºå—é“¾ä»¥å¤ªåŠå®éªŒæŠ¥å‘Š</h1>
    
    <span class="article-date">2018-11-04</span>
    

    <div class="article-content">
      

<h1 id="center-åŒºå—é“¾ä»¥å¤ªåŠå®éªŒæŠ¥å‘Š-center"><center>åŒºå—é“¾ä»¥å¤ªåŠå®éªŒæŠ¥å‘Š</center></h1>

<p>[TOC]</p>

<h2 id="ä¸€-ä»¥å¤ªåŠå®‰è£…-ç§æœ‰é“¾åˆ›ä¸–åŒºå—æ­å»º">ä¸€ã€ä»¥å¤ªåŠå®‰è£…ã€ç§æœ‰é“¾åˆ›ä¸–åŒºå—æ­å»º</h2>

<h3 id="1-1-ç¿»å¢™ä¸‹è½½geth">1.1 ç¿»å¢™ä¸‹è½½Geth</h3>

<p><a href="https://github.com/ethereum/go-ethereum/wiki/Building-Ethereum">ä¸‹è½½æŒ‡å¼•https://github.com/ethereum/go-ethereum/wiki/Building-Ethereum</a></p>

<h3 id="1-2-å®šä¹‰åˆ›ä¸–åŒºå—é…ç½®">1.2 å®šä¹‰åˆ›ä¸–åŒºå—é…ç½®</h3>

<p>åœ¨<code>privatechain</code>ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªJsonæ–‡ä»¶ï¼Œç¼–è¾‘å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#6ab825;font-weight:bold">&#34;config&#34;</span>: {
        <span style="color:#6ab825;font-weight:bold">&#34;chainId&#34;</span>: <span style="color:#3677a9">10</span>, 
        <span style="color:#6ab825;font-weight:bold">&#34;homesteadBlock&#34;</span>: <span style="color:#3677a9">0</span>,
        <span style="color:#6ab825;font-weight:bold">&#34;eip155Block&#34;</span>: <span style="color:#3677a9">0</span>,
        <span style="color:#6ab825;font-weight:bold">&#34;eip158Block&#34;</span>: <span style="color:#3677a9">0</span>
    },
  <span style="color:#6ab825;font-weight:bold">&#34;alloc&#34;</span>      : {},
  <span style="color:#6ab825;font-weight:bold">&#34;coinbase&#34;</span>   : <span style="color:#ed9d13">&#34;0x0000000000000000000000000000000000000000&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;difficulty&#34;</span> : <span style="color:#ed9d13">&#34;0x20000&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;extraData&#34;</span>  : <span style="color:#ed9d13">&#34;&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;gasLimit&#34;</span>   : <span style="color:#ed9d13">&#34;0x2fefd8&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;nonce&#34;</span>      : <span style="color:#ed9d13">&#34;0x0000000000000042&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;mixhash&#34;</span>    : <span style="color:#ed9d13">&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;parentHash&#34;</span> : <span style="color:#ed9d13">&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style="color:#6ab825;font-weight:bold">&#34;timestamp&#34;</span>  : <span style="color:#ed9d13">&#34;0x00&#34;</span>
}</code></pre></div>
<h3 id="1-3-åˆå§‹åŒ–ç§æœ‰é“¾">1.3 åˆå§‹åŒ–ç§æœ‰é“¾</h3>

<p>åˆ›å»ºdata0æ–‡ä»¶å¤¹</p>

<p>åœ¨<code>privatechain</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<strong>data0</strong>ï¼Œè¿™ä¸ªç›®å½•data0å°±ç›¸å½“äºä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚</p>

<p>æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤</p>

<p>è¿›å…¥<code>privatechain</code>ç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --datadir data0 init genesis.json</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104160004.png" alt="Img_init" /></p>

<h3 id="1-4-å¯åŠ¨ç§æœ‰é“¾ç»“ç‚¹">1.4 å¯åŠ¨ç§æœ‰é“¾ç»“ç‚¹</h3>

<p>ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --datadir data0 --networkid <span style="color:#3677a9">1997</span> console</code></pre></div>
<p><strong>â€“datadir</strong>é€‰é¡¹æŒ‡å®šä½¿ç”¨<strong>data0</strong>ä½œä¸ºæ•°æ®ç›®å½•ï¼Œ<strong>â€“networkid</strong>é€‰é¡¹åé¢è·Ÿä¸€ä¸ªæ•°å­—ï¼Œè¿™é‡Œæ˜¯1997ï¼Œè¡¨ç¤ºæŒ‡å®šè¿™ä¸ªç§æœ‰é“¾çš„ç½‘ç»œidä¸º1997ã€‚</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104160416.png" alt="Img_console" /></p>

<p>è¿™æ ·æˆ‘ä»¬å°±å¯åŠ¨äº†åŒºå—é“¾èŠ‚ç‚¹å¹¶è¿›å…¥äº†<strong>Javascript Console</strong> ã€‚</p>

<h3 id="1-5-åˆ›å»ºç”¨æˆ·-åˆ›å»ºä¸¤ä¸ª">1.5 åˆ›å»ºç”¨æˆ·ï¼ˆåˆ›å»ºä¸¤ä¸ªï¼‰</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.accounts
[]
&gt; personal.newAccount()
Passphrase:
Repeat passphrase:
<span style="color:#ed9d13">&#34;0x9f72a74e269dd4e7766a4bc4788562d6b1987031&#34;</span>
&gt; personal.newAccount()
Passphrase:
Repeat passphrase:
<span style="color:#ed9d13">&#34;0x2994d23e0dbff5f87492e0175f5e49d67ab83bec&#34;</span>
&gt; eth.accounts
[<span style="color:#ed9d13">&#34;0x9f72a74e269dd4e7766a4bc4788562d6b1987031&#34;</span>, <span style="color:#ed9d13">&#34;0x2994d23e0dbff5f87492e0175f5e49d67ab83bec&#34;</span>]</code></pre></div>
<p><strong>Passphrase</strong>ä¸ºç”¨æˆ·å¯†ç ã€‚</p>

<p>åˆ›å»ºç”¨æˆ·å®Œæˆåï¼Œåœ¨<code>privatechain-&gt;data0-&gt;keystore</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸¤ä¸ª<strong>json</strong>æ–‡ä»¶å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104161114.png" alt="Img_create_two_accounts" /></p>

<p>æŸ¥çœ‹<strong>json</strong>æ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆä»¥ç¬¬ä¸€ä¸ªç”¨æˆ·ä¸ºä¾‹å­ï¼‰ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#6ab825;font-weight:bold">&#34;address&#34;</span>:<span style="color:#ed9d13">&#34;9f72a74e269dd4e7766a4bc4788562d6b1987031&#34;</span>,<span style="color:#6ab825;font-weight:bold">&#34;crypto&#34;</span>:{<span style="color:#6ab825;font-weight:bold">&#34;cipher&#34;</span>:<span style="color:#ed9d13">&#34;aes-128-ctr&#34;</span>,<span style="color:#6ab825;font-weight:bold">&#34;ciphertext&#34;</span>:<span style="color:#ed9d13">&#34;37c27935fd7ac277d70a89600b99a79bd144bf3df7f62d4ddf13790816ed1908&#34;</span>,<span style="color:#6ab825;font-weight:bold">&#34;cipherparams&#34;</span>:{<span style="color:#6ab825;font-weight:bold">&#34;iv&#34;</span>:<span style="color:#ed9d13">&#34;28d299db4b533636d43f4a4a7eaafbce&#34;</span>},<span style="color:#6ab825;font-weight:bold">&#34;kdf&#34;</span>:<span style="color:#ed9d13">&#34;scrypt&#34;</span>,<span style="color:#6ab825;font-weight:bold">&#34;kdfparams&#34;</span>:{<span style="color:#6ab825;font-weight:bold">&#34;dklen&#34;</span>:<span style="color:#3677a9">32</span>,<span style="color:#6ab825;font-weight:bold">&#34;n&#34;</span>:<span style="color:#3677a9">262144</span>,<span style="color:#6ab825;font-weight:bold">&#34;p&#34;</span>:<span style="color:#3677a9">1</span>,<span style="color:#6ab825;font-weight:bold">&#34;r&#34;</span>:<span style="color:#3677a9">8</span>,<span style="color:#6ab825;font-weight:bold">&#34;salt&#34;</span>:<span style="color:#ed9d13">&#34;0bc50703e57ab9ab438b967b3dd074079bcafe7e5514ab95e92d7f6615b9c2e1&#34;</span>},<span style="color:#6ab825;font-weight:bold">&#34;mac&#34;</span>:<span style="color:#ed9d13">&#34;fcc54fda6c73369235de08cbcf1986eb2bf3148a500ee3bbf72ed87db541f2af&#34;</span>},<span style="color:#6ab825;font-weight:bold">&#34;id&#34;</span>:<span style="color:#ed9d13">&#34;7528bf72-7ee7-4bc0-b063-8a5b487b79c5&#34;</span>,<span style="color:#6ab825;font-weight:bold">&#34;version&#34;</span>:<span style="color:#3677a9">3</span>}</code></pre></div>
<h3 id="1-6-æŸ¥çœ‹ç”¨æˆ·çš„è´¦å·æ¯”å¤ªå¸ä½™é¢">1.6 æŸ¥çœ‹ç”¨æˆ·çš„è´¦å·æ¯”å¤ªå¸ä½™é¢ï¼š</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">0</span>])
<span style="color:#3677a9">0</span>
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">0</span></code></pre></div>
<p>ç›®å‰ä¸¤ä¸ªç”¨æˆ·çš„ä»¥å¤ªå¸ä½™é¢éƒ½ä¸º0ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è½¬è´¦æˆ–è€…æŒ–çŸ¿æ¥è·å¾—ä»¥å¤ªå¸ã€‚</p>

<h3 id="1-7-æŒ–çŸ¿">1.7 æŒ–çŸ¿</h3>

<p>å¼€å§‹æŒ–çŸ¿ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">miner.start(<span style="color:#3677a9">10</span>)</code></pre></div>
<p>å‡çº§DAGæŒ–çŸ¿ç¨‹åºï¼š</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104161921.png" alt="Img-dig" /></p>

<p>æ­£åœ¨æŒ–çŸ¿ï¼š</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104162130.png" alt="Img-dig2" /></p>

<p>ç»“æŸæŒ–çŸ¿ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">miner.stop()</code></pre></div>
<h3 id="1-8-æŸ¥çœ‹è´¦æˆ·æ¯”ç‰¹å¸æ•°é¢">1.8 æŸ¥çœ‹è´¦æˆ·æ¯”ç‰¹å¸æ•°é¢</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">0</span>])
<span style="color:#3677a9">795000000000000000000</span>
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">0</span>
&gt; web3.fromWei(eth.getBalance(eth.accounts[<span style="color:#3677a9">0</span>]),<span style="color:#ed9d13">&#39;ether&#39;</span>)
<span style="color:#3677a9">795</span>
&gt; web3.fromWei(eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>]),<span style="color:#ed9d13">&#39;ether&#39;</span>)
<span style="color:#3677a9">0</span></code></pre></div>
<p><strong>getBalance()</strong>è¿”å›å€¼çš„å•ä½æ˜¯<strong>wei</strong>ï¼Œ<strong>wei</strong>æ˜¯ä»¥å¤ªå¸çš„æœ€å°å•ä½ï¼Œ1ä¸ªä»¥å¤ªå¸=10çš„18æ¬¡æ–¹ä¸ª<strong>wei</strong>ã€‚è¦æŸ¥çœ‹æœ‰å¤šå°‘ä¸ªä»¥å¤ªå¸ï¼Œå¯ä»¥ç”¨<strong>web3.fromWei()</strong>å°†è¿”å›å€¼æ¢ç®—æˆä»¥å¤ªå¸ã€‚</p>

<h3 id="1-9-å‘é€äº¤æ˜“">1.9 å‘é€äº¤æ˜“</h3>

<p>è´¦æˆ·1äº¤æ˜“10æ¯”ç‰¹å¸åˆ°è´¦æˆ·2</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; <span style="color:#40ffff">amount</span> = web3.toWei(<span style="color:#3677a9">10</span>,<span style="color:#ed9d13">&#39;ether&#39;</span>)
<span style="color:#ed9d13">&#34;10000000000000000000&#34;</span>
&gt; eth.sendTransaction({from:eth.accounts[<span style="color:#3677a9">0</span>],to:eth.accounts[<span style="color:#3677a9">1</span>],value:amount})
Error: authentication needed: password or unlock
    at web3.js:3143:20
    at web3.js:6347:15
    at web3.js:5081:36
    at &lt;anonymous&gt;:1:1

&gt;</code></pre></div>
<p>æŠ¥é”™ï¼Œè´¦æˆ·è¢«é”ä½äº†ï¼Œæˆ‘ä»¬å…ˆè§£é”è´¦æˆ·</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; personal.unlockAccount(eth.accounts[<span style="color:#3677a9">0</span>])
Unlock account 0x9f72a74e269dd4e7766a4bc4788562d6b1987031
Passphrase:
true</code></pre></div>
<p>å†å‘é€äº¤æ˜“ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; <span style="color:#40ffff">amount</span> = web3.toWei(<span style="color:#3677a9">10</span>,<span style="color:#ed9d13">&#39;ether&#39;</span>)
<span style="color:#ed9d13">&#34;10000000000000000000&#34;</span>
&gt; eth.sendTransaction({from:eth.accounts[<span style="color:#3677a9">0</span>],to:eth.accounts[<span style="color:#3677a9">1</span>],value:amount})
INFO [<span style="color:#3677a9">11</span>-04|<span style="color:#3677a9">16</span>:40:34.643] Setting new <span style="color:#24909d">local</span> account                <span style="color:#40ffff">address</span>=0x9f72a74E269Dd4e7766A4bc4788562d6b1987031
INFO [<span style="color:#3677a9">11</span>-04|<span style="color:#3677a9">16</span>:40:34.648] Submitted transaction                    <span style="color:#40ffff">fullhash</span>=0x9e5cd2101b4d36f2e2202c049a1ed398439a256c629178ee5fd24ef91081e273 <span style="color:#40ffff">recipient</span>=0x2994D23E0dbFF5F87492E0175f5e49D67AB83BEc
<span style="color:#ed9d13">&#34;0x9e5cd2101b4d36f2e2202c049a1ed398439a256c629178ee5fd24ef91081e273&#34;</span></code></pre></div>
<p>æŸ¥çœ‹è´¦æˆ·1çš„æ¯”ç‰¹å¸ä½™é¢ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">0</span></code></pre></div>
<p>è¿˜æ˜¯0ï¼Œå› ä¸ºäº¤æ˜“æäº¤åˆ°åŒºå—é“¾ï¼Œä½†è¿˜æœªè¢«å¤„ç†:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; txpool.status
{
  pending: <span style="color:#3677a9">1</span>,
  queued: <span style="color:#3677a9">0</span>
}</code></pre></div>
<p>è¦äº¤æ˜“è¢«å¤„ç†ï¼Œå¿…é¡»è¦æŒ–çŸ¿</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; miner.start(<span style="color:#3677a9">1</span>);admin.sleepBlocks(<span style="color:#3677a9">1</span>);miner.stop();</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104164508.png" alt="Img-dig-again" /></p>

<p>å†æŸ¥çœ‹è´¦æˆ·1çš„æ¯”ç‰¹å¸ä½™é¢</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">10000000000000000000</span></code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104201508.png" alt="" /></p>

<p>äº¤æ˜“æˆåŠŸã€‚</p>

<h3 id="1-10-æŸ¥çœ‹åŒºå—">1.10 æŸ¥çœ‹åŒºå—</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.blockNumber
<span style="color:#3677a9">161</span>
&gt; eth.getBlock(<span style="color:#3677a9">161</span>)</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104201701.png" alt="" /></p>

<h3 id="1-11-æŸ¥çœ‹äº¤æ˜“">1.11 æŸ¥çœ‹äº¤æ˜“</h3>

<p>é€šè¿‡å‘é€äº¤æ˜“æ—¶å¾—åˆ°çš„äº¤æ˜“<strong>Hash</strong>æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;eth.getTransaction(<span style="color:#ed9d13">&#34;0x9e5cd2101b4d36f2e2202c049a1ed398439a256c629178ee5fd24ef91081e273&#34;</span>)</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104201939.png" alt="" /></p>

<hr />

<h2 id="äºŒ-å¯¹getblockä¸­æ‰€å¾—åŒºå—çš„å„ä¸ªå­—æ®µè¿›è¡Œè§£é‡Š">äºŒã€å¯¹getBlockä¸­æ‰€å¾—åŒºå—çš„å„ä¸ªå­—æ®µè¿›è¡Œè§£é‡Š</h2>

<h3 id="2-1-getblock-æŸ¥çœ‹åŒºå—ä¿¡æ¯">2.1 <strong>getBlock</strong>æŸ¥çœ‹åŒºå—ä¿¡æ¯ï¼š</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.blockNumber
<span style="color:#3677a9">161</span>
&gt; eth.getBlock(<span style="color:#3677a9">161</span>)</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104201701.png" alt="" /></p>

<h3 id="2-2-getblock-å­—æ®µè§£æ">2.2 <strong>getBlock</strong>å­—æ®µè§£æï¼š</h3>

<ul>
<li><strong>difficulty</strong>ï¼š<strong>BigNumber</strong>ç±»å‹ã€‚å½“å‰å—çš„éš¾åº¦ï¼Œæ•´æ•°ã€‚</li>
<li>extraDataï¼š å­—ç¬¦ä¸²ã€‚å½“å‰å—çš„extra dataå­—æ®µã€‚</li>
<li><strong>gasLimit</strong>ï¼š<strong>Number</strong>ï¼Œå½“å‰åŒºå—å…è®¸ä½¿ç”¨çš„æœ€å¤§<strong>gas</strong>ã€‚</li>
<li><strong>gasUsed</strong>ï¼šå½“å‰åŒºå—ç´¯è®¡ä½¿ç”¨çš„æ€»çš„gasã€‚</li>
<li><strong>hash</strong>ï¼šå­—ç¬¦ä¸²ï¼ŒåŒºå—çš„å“ˆå¸Œä¸²ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>logsBloom</strong>ï¼šå­—ç¬¦ä¸²ï¼ŒåŒºå—æ—¥å¿—çš„å¸ƒéš†è¿‡æ»¤å™¨9ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>miner</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ20å­—èŠ‚ã€‚è¿™ä¸ªåŒºå—è·å¾—å¥–åŠ±çš„çŸ¿å·¥ã€‚</li>
<li><strong>mixHash</strong>ï¼šä¸€ä¸ªHashå€¼ï¼Œå½“ä¸nonceç»„åˆæ—¶ï¼Œè¯æ˜æ­¤åŒºå—å·²ç»æ‰§è¡Œäº†è¶³å¤Ÿçš„è®¡ç®—</li>
<li><strong>nonce</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ8å­—èŠ‚ã€‚POWç”Ÿæˆçš„å“ˆå¸Œã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>number</strong>ï¼šåŒºå—å·ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>parentHash</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ32å­—èŠ‚çš„çˆ¶åŒºå—çš„å“ˆå¸Œå€¼ã€‚</li>
<li><strong>receiptsRoot</strong>ï¼šåŒ…å«æ­¤åŒºå—æ‰€åˆ—çš„æ‰€æœ‰äº¤æ˜“æ”¶æ®çš„æ ‘çš„æ ¹èŠ‚ç‚¹Hashå€¼</li>
<li><strong>sha3Uncles</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ32å­—èŠ‚ã€‚å”åŒºå—çš„å“ˆå¸Œå€¼ã€‚</li>
<li><strong>size</strong>ï¼šNumberã€‚å½“å‰è¿™ä¸ªå—çš„å­—èŠ‚å¤§å°ã€‚</li>
<li><strong>stateRoot</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ32å­—èŠ‚ã€‚åŒºå—çš„æœ€ç»ˆçŠ¶æ€å‰ç¼€æ ‘çš„æ ¹ã€‚</li>
<li><strong>timestampï¼šNumber</strong>ã€‚åŒºå—æ‰“åŒ…æ—¶çš„unixæ—¶é—´æˆ³ã€‚</li>
<li><strong>totalDifficulty</strong>ï¼š<strong>BigNumber</strong>ç±»å‹ã€‚åŒºå—é“¾åˆ°å½“å‰å—çš„æ€»éš¾åº¦ï¼Œæ•´æ•°ã€‚</li>
<li><strong>transactions</strong>ï¼šæ•°ç»„ã€‚äº¤æ˜“å¯¹è±¡ã€‚æˆ–è€…æ˜¯32å­—èŠ‚çš„äº¤æ˜“å“ˆå¸Œã€‚</li>
<li><strong>transactionsRoot</strong>ï¼šå­—ç¬¦ä¸²ï¼Œ32å­—èŠ‚ï¼ŒåŒºå—çš„äº¤æ˜“å‰ç¼€æ ‘çš„æ ¹ã€‚</li>
<li><strong>uncles</strong>ï¼šæ•°ç»„ã€‚å”å“ˆå¸Œçš„æ•°ç»„ã€‚</li>
</ul>

<hr />

<h2 id="ä¸‰-å¯¹æ—¥å¿—è¾“å‡ºè¿›è¡Œè§£é‡Š">ä¸‰ã€å¯¹æ—¥å¿—è¾“å‡ºè¿›è¡Œè§£é‡Š</h2>

<h3 id="3-1-æ—¥å¿—è¾“å‡º">3.1 æ—¥å¿—è¾“å‡º</h3>

<p>å…ˆé€€å‡ºconsole</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">exit</code></pre></div>
<p>é‡æ–°è¿›å…¥consoleï¼Œä½†è¿™æ¬¡æ˜¯è¿›è¡Œlogæ—¥å¿—è®°å½•çš„</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --datadir data0 --networkid <span style="color:#3677a9">1997</span> console <span style="color:#3677a9">2</span>&gt;&gt;eth_output.log</code></pre></div>
<p>æˆåŠŸåï¼Œæ ¹ç›®å½•æœ‰ä¸€ä¸ª<strong>eth_output.log</strong>æ–‡ä»¶ï¼š</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104174553.png" alt="Img-log1" /></p>

<p>æŸ¥çœ‹ç§æœ‰é“¾ä¿¡æ¯ï¼Œæ²¡æœ‰ä¸¢å¤±</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; eth.accounts
[<span style="color:#ed9d13">&#34;0x9f72a74e269dd4e7766a4bc4788562d6b1987031&#34;</span>, <span style="color:#ed9d13">&#34;0x2994d23e0dbff5f87492e0175f5e49d67ab83bec&#34;</span>]
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">0</span>])
<span style="color:#3677a9">795000000000000000000</span>
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">10000000000000000000</span></code></pre></div>
<p>æˆ‘ä»¬è¿›è¡ŒæŒ–çŸ¿ï¼Œè¯•è¯•çœ‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; miner.start(<span style="color:#3677a9">1</span>);admin.sleepBlocks(<span style="color:#3677a9">1</span>);miner.stop();
null
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">0</span>])
<span style="color:#3677a9">800000000000000000000</span>
&gt; eth.getBalance(eth.accounts[<span style="color:#3677a9">1</span>])
<span style="color:#3677a9">10000000000000000000</span></code></pre></div>
<p>è¿™é‡Œçœ‹åˆ°æŒ–çŸ¿çš„å å±çš„ä¸€å¤§ä¸²ä¿¡æ¯éƒ½â€œæ²¡äº†â€ï¼Œåªæ˜¾ç¤ºç»“æœnullã€‚å®é™…ä¸ŠæŒ–çŸ¿ä¿¡æ¯å¹¶ä¸æ˜¯æ²¡æœ‰äº†ï¼Œè€Œæ˜¯è½¬è€Œå­˜å‚¨åœ¨logæ–‡ä»¶ä¸­äº†ã€‚</p>

<p>è¿™æ—¶å€™ï¼Œlogæ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œå°†åˆšæ‰æˆ‘ä»¬æŒ–çŸ¿çš„ä¿¡æ¯ï¼ˆLine 23ï¼‰ç»™è®°å½•ä¸‹æ¥äº†ï¼š</p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104174652.png" alt="Img-log2" /></p>

<h3 id="3-2-æ—¥å¿—è¾“å‡ºè§£é‡Š">3.2 æ—¥å¿—è¾“å‡ºè§£é‡Š</h3>

<h4 id="3-2-1-æ—¥å¿—1-line3-18">3.2.1 æ—¥å¿—1ï¼ˆLine3-18ï¼‰</h4>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104211904.png" alt="" /></p>

<p>è¿™æ˜¯æ“ä½œè¿æ¥ç§æœ‰é“¾ç»“ç‚¹data0çš„logæ—¥å¿—</p>

<p><code>line4: Initialised chain configuration</code>ï¼šåˆå§‹åŒ–åŠ è½½ç§æœ‰é“¾çš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶ä¸º<strong>genesis.json</strong></p>

<p><code>line9:Loaded most recent local full block</code>ï¼šåŠ è½½æœ€è¿‘ä½¿ç”¨çš„åŒºå—ï¼Œå› ä¸ºåˆšè¿›è¡Œäº†æŒ–çŸ¿å’Œäº¤æ˜“ï¼Œæœ€è¿‘çš„åŒºå—å·å·²ç»åˆ°äº†161ï¼Œè€Œå› ä¸ºåˆšå¼€å§‹Logè®°å½•ï¼Œä¹‹å‰çš„consoleå¹¶æ²¡æœ‰ä¿å­˜åˆ°logã€‚</p>

<p><code>line18:Etherbase automatically configured</code>ï¼šè‡ªåŠ¨é…ç½®ä»¥å¤ªåŠipåœ°å€ï¼Œæ˜¯è¿™ä¸ªç§æœ‰é“¾çš„addressã€‚</p>

<h4 id="3-2-2-æ—¥å¿—2-line19-32">3.2.2 æ—¥å¿—2 (Line19-32)</h4>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104212046.png" alt="" /></p>

<p>è¿™æ˜¯ç¬¬ä¸€ç¬”äº¤æ˜“åï¼Œä¸ºäº†è®©äº¤æ˜“è¢«æ¥å—ï¼Œè¿›è¡ŒæŒ–çŸ¿ğŸ”¨ã€‚</p>

<pre><code>line21:Commit new mining work
line22:Successfully sealed new block    
line23:ğŸ”¨ mined potential block
</code></pre>

<hr />

<h2 id="å››-ç¼–å†™ç®€å•çš„æ™ºèƒ½åˆçº¦-åœ¨remixä¸‹è¿›è¡Œè°ƒè¯•-å¹¶éƒ¨ç½²åœ¨é“¾ä¸Šè¿›è¡Œè°ƒç”¨">å››ã€ç¼–å†™ç®€å•çš„æ™ºèƒ½åˆçº¦ï¼Œåœ¨remixä¸‹è¿›è¡Œè°ƒè¯•ï¼Œå¹¶éƒ¨ç½²åœ¨é“¾ä¸Šè¿›è¡Œè°ƒç”¨</h2>

<h3 id="4-1-ç¼–å†™æ™ºèƒ½åˆçº¦">4.1  ç¼–å†™æ™ºèƒ½åˆçº¦</h3>

<p>å†™ä¸ªæœ€åŸºç¡€çš„<strong>helloworld</strong>æ™ºèƒ½åˆçº¦ï¼Œç”¨solidityè¯­è¨€å®ç° ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">pragma solidity ^<span style="color:#3677a9">0.4.18</span>;
contract hello {
    string greeting;
    
    <span style="color:#6ab825;font-weight:bold">function</span> hello(string _greeting) <span style="color:#6ab825;font-weight:bold">public</span> {
        greeting = _greeting;
    }

    <span style="color:#6ab825;font-weight:bold">function</span> say() constant <span style="color:#6ab825;font-weight:bold">public</span> returns (string) {
        <span style="color:#6ab825;font-weight:bold">return</span> greeting;
    }
}
</code></pre></div>
<h3 id="4-2-ç¼–è¯‘æ™ºèƒ½åˆçº¦helloworld">4.2 ç¼–è¯‘æ™ºèƒ½åˆçº¦helloworld</h3>

<p><a href="http://remix.ethereum.org/#optimize=true&amp;version=soljson-v0.4.21+commit.dfe3193c.js">åœ¨çº¿remixç¼–è¯‘å™¨</a></p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104205006.png" alt="" /></p>

<p>ç‚¹å‡»å³è¾¹<strong>Start to compile</strong></p>

<p>ç‚¹å‡»å³è¾¹<strong>Detail</strong></p>

<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104205109.png" alt="" /></p>

<p>æ‰¾åˆ°<strong>WEB3DEPLOY</strong> éƒ¨åˆ†ï¼Œå¤åˆ¶ç²˜è´´åˆ°<code>privatechain-&gt;helloworld.js</code>æ–‡ä»¶å†…ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6ab825;font-weight:bold">var</span> _greeting = <span style="color:#ed9d13">&#34;hello world!&#34;</span> ;
<span style="color:#6ab825;font-weight:bold">var</span> helloContract = web3.eth.contract([{<span style="color:#ed9d13">&#34;constant&#34;</span>:<span style="color:#6ab825;font-weight:bold">true</span>,<span style="color:#ed9d13">&#34;inputs&#34;</span>:[],<span style="color:#ed9d13">&#34;name&#34;</span>:<span style="color:#ed9d13">&#34;say&#34;</span>,<span style="color:#ed9d13">&#34;outputs&#34;</span>:[{<span style="color:#ed9d13">&#34;name&#34;</span>:<span style="color:#ed9d13">&#34;&#34;</span>,<span style="color:#ed9d13">&#34;type&#34;</span>:<span style="color:#ed9d13">&#34;string&#34;</span>}],<span style="color:#ed9d13">&#34;payable&#34;</span>:<span style="color:#6ab825;font-weight:bold">false</span>,<span style="color:#ed9d13">&#34;stateMutability&#34;</span>:<span style="color:#ed9d13">&#34;view&#34;</span>,<span style="color:#ed9d13">&#34;type&#34;</span>:<span style="color:#ed9d13">&#34;function&#34;</span>},{<span style="color:#ed9d13">&#34;inputs&#34;</span>:[{<span style="color:#ed9d13">&#34;name&#34;</span>:<span style="color:#ed9d13">&#34;_greeting&#34;</span>,<span style="color:#ed9d13">&#34;type&#34;</span>:<span style="color:#ed9d13">&#34;string&#34;</span>}],<span style="color:#ed9d13">&#34;payable&#34;</span>:<span style="color:#6ab825;font-weight:bold">false</span>,<span style="color:#ed9d13">&#34;stateMutability&#34;</span>:<span style="color:#ed9d13">&#34;nonpayable&#34;</span>,<span style="color:#ed9d13">&#34;type&#34;</span>:<span style="color:#ed9d13">&#34;constructor&#34;</span>}]);
<span style="color:#6ab825;font-weight:bold">var</span> hello = helloContract.<span style="color:#6ab825;font-weight:bold">new</span>(
   _greeting,
   {
     from: web3.eth.accounts[<span style="color:#3677a9">0</span>], 
     data: <span style="color:#ed9d13">&#39;0x6060604052341561000f57600080fd5b6040516102a33803806102a3833981016040528080519091019050600081805161003d929160200190610044565b50506100df565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061008557805160ff19168380011785556100b2565b828001600101855582156100b2579182015b828111156100b2578251825591602001919060010190610097565b506100be9291506100c2565b5090565b6100dc91905b808211156100be57600081556001016100c8565b90565b6101b5806100ee6000396000f3006060604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663954ab4b28114610045575b600080fd5b341561005057600080fd5b6100586100cf565b60405160208082528190810183818151815260200191508051906020019080838360005b8381101561009457808201518382015260200161007c565b50505050905090810190601f1680156100c15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6100d7610177565b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561016d5780601f106101425761010080835404028352916020019161016d565b820191906000526020600020905b81548152906001019060200180831161015057829003601f168201915b5050505050905090565b602060405190810160405260008152905600a165627a7a723058206d6435d55697d5974b31bdd92ebdff05aabfdde6182fb0432effad5141ae97b50029&#39;</span>, 
     gas: <span style="color:#ed9d13">&#39;470000&#39;</span>
   }, <span style="color:#6ab825;font-weight:bold">function</span> (e, contract){
    console.log(e, contract);
    <span style="color:#6ab825;font-weight:bold">if</span> (<span style="color:#6ab825;font-weight:bold">typeof</span> contract.address !== <span style="color:#ed9d13">&#39;undefined&#39;</span>) {
         console.log(<span style="color:#ed9d13">&#39;Contract mined! address: &#39;</span> + contract.address + <span style="color:#ed9d13">&#39; transactionHash: &#39;</span> + contract.transactionHash);
    }
 })
</code></pre></div>
<p>åšäº†ç»†å¾®çš„ä¿®æ”¹ï¼š</p>

<ol>
<li><p>ç¬¬ä¸€è¡Œç»™å˜é‡<strong>_greeting</strong>èµ‹å€¼</p></li>

<li><p>å°†<strong>gas</strong>å€¼æ”¹å°ä¸è¶…è¿‡åŒºå—<strong>gasLimit</strong></p></li>
</ol>

<h3 id="4-3-éƒ¨ç½²æ™ºèƒ½åˆçº¦">4.3 éƒ¨ç½²æ™ºèƒ½åˆçº¦</h3>

<p>ä¸¤ä¸ªæ³¨æ„é¡¹ï¼š</p>

<ul>
<li>æ²¡æœ‰è§£é”ç”¨æˆ·</li>
<li><strong>gas</strong>å€¼è¶…è¿‡äº†åŒºå—é™åˆ¶æœ€å¤§<strong>gasLimit</strong></li>
</ul>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; personal.unlockAccount(eth.accounts[<span style="color:#3677a9">0</span>])
Unlock account 0x9f72a74e269dd4e7766a4bc4788562d6b1987031
Passphrase:
<span style="color:#24909d">true</span>
&gt; personal.unlockAccount(eth.accounts[<span style="color:#3677a9">1</span>])
Unlock account 0x2994d23e0dbff5f87492e0175f5e49d67ab83bec
Passphrase:
<span style="color:#24909d">true</span>
&gt; loadScript(<span style="color:#ed9d13">&#34;helloworld.js&#34;</span>)
Error: exceeds block gas limit undefined
<span style="color:#24909d">true</span>
&gt; loadScript(<span style="color:#ed9d13">&#34;helloworld.js&#34;</span>)
null [object Object]
true</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194309.png" alt="" /></p>

<p>éƒ¨ç½²æˆåŠŸåï¼ŒæŒ–çŸ¿ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; miner.start(<span style="color:#3677a9">1</span>)
null
null [object Object]
Contract mined! address: 0x235f7c42590a5debb1084afda2575df3192b6604 transactionHash: 0x97e5ae7933fe30e532e8b0f9fad583b440a2a7929ba636b79a10dd55b283174f
&gt; miner.stop()
null
&gt; miner.stop(<span style="color:#3677a9">1</span>)</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194425.png" alt="" /></p>

<h3 id="4-4-è¿è¡Œæ™ºèƒ½åˆçº¦">4.4 è¿è¡Œæ™ºèƒ½åˆçº¦</h3>

<p>è¿™æ—¶å€™æ™ºèƒ½åˆçº¦å¯ä»¥è¿è¡Œ</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; hello.say()
<span style="color:#ed9d13">&#34;hello world!&#34;</span></code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194450.png" alt="" /></p>

<p>æŸ¥çœ‹æ™ºèƒ½åˆçº¦</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hello</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194834.png" alt="" /></p>

<p>æŸ¥çœ‹æ™ºèƒ½åˆçº¦äº¤æ˜“ï¼šï¼ˆtoæ˜¯<strong>null</strong>ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½åˆçº¦äº¤æ˜“ï¼‰</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;eth.getTransaction(<span style="color:#ed9d13">&#34;0x97e5ae7933fe30e532e8b0f9fad583b440a2a7929ba636b79a10dd55b283174f&#34;</span>)</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194811.png" alt="" /></p>

<hr />

<h2 id="äº”-å¯¹äº¤æ˜“çš„å­—æ®µè¿›è¡Œè§£é‡Š">äº”ã€å¯¹äº¤æ˜“çš„å­—æ®µè¿›è¡Œè§£é‡Š</h2>

<h3 id="5-1-æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…">5.1 æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…</h3>

<p>ç”¨<strong>eth.getTransaction()</strong>æŸ¥çœ‹äº¤æ˜“ï¼Œå‚æ•°æ˜¯äº¤æ˜“çš„<strong>Hash</strong>ã€‚</p>

<p>ä¾‹å¦‚æˆ‘ä»¬æŸ¥çœ‹åˆšæ‰æ™ºèƒ½åˆçº¦äº¤æ˜“çš„äº¤æ˜“è¯¦æƒ…ï¼šï¼ˆæ³¨æ„<strong>to</strong>å­—æ®µçš„å€¼æ˜¯<strong>null</strong>ï¼‰</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;eth.getTransaction(<span style="color:#ed9d13">&#34;0x97e5ae7933fe30e532e8b0f9fad583b440a2a7929ba636b79a10dd55b283174f&#34;</span>)
{
  blockHash: <span style="color:#ed9d13">&#34;0x6fd9365110b890389f5ecc0cf98fbd0c1543d5840eccb2f2b4c92250083a52f5&#34;</span>,
  blockNumber: <span style="color:#3677a9">163</span>,
  from: <span style="color:#ed9d13">&#34;0x9f72a74e269dd4e7766a4bc4788562d6b1987031&#34;</span>,
  gas: <span style="color:#3677a9">470000</span>,
  gasPrice: <span style="color:#3677a9">1000000000</span>,
  hash: <span style="color:#ed9d13">&#34;0x97e5ae7933fe30e532e8b0f9fad583b440a2a7929ba636b79a10dd55b283174f&#34;</span>,
  input: <span style="color:#ed9d13">&#34;0x6060604052341561000f57600080fd5b6040516102a33803806102a3833981016040528080519091019050600081805161003d929160200190610044565b50506100df565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061008557805160ff19168380011785556100b2565b828001600101855582156100b2579182015b828111156100b2578251825591602001919060010190610097565b506100be9291506100c2565b5090565b6100dc91905b808211156100be57600081556001016100c8565b90565b6101b5806100ee6000396000f3006060604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663954ab4b28114610045575b600080fd5b341561005057600080fd5b6100586100cf565b60405160208082528190810183818151815260200191508051906020019080838360005b8381101561009457808201518382015260200161007c565b50505050905090810190601f1680156100c15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6100d7610177565b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561016d5780601f106101425761010080835404028352916020019161016d565b820191906000526020600020905b81548152906001019060200180831161015057829003601f168201915b5050505050905090565b602060405190810160405260008152905600a165627a7a723058206d6435d55697d5974b31bdd92ebdff05aabfdde6182fb0432effad5141ae97b500290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c68656c6c6f20776f726c64210000000000000000000000000000000000000000&#34;</span>,
  nonce: <span style="color:#3677a9">1</span>,
  r: <span style="color:#ed9d13">&#34;0x848d2088608fe0edd3f1ee2f958bd57ca7906183b044e499e04de52a0a4199a8&#34;</span>,
  s: <span style="color:#ed9d13">&#34;0x5317428ad8c2db8261e5f33ddd2906e5f6f58ccbb64115b67760a07fddf2aa9b&#34;</span>,
  to: null,
  transactionIndex: <span style="color:#3677a9">0</span>,
  v: <span style="color:#ed9d13">&#34;0x37&#34;</span>,
  value: <span style="color:#3677a9">0</span>
}</code></pre></div>
<p><img src="https://chenbb-1257745007.cos.ap-guangzhou.myqcloud.com/blog/20181104194811.png" alt="" /></p>

<h3 id="5-2-äº¤æ˜“å­—æ®µè§£æ">5.2 äº¤æ˜“å­—æ®µè§£æ</h3>

<ul>
<li><strong>blockHash</strong>: äº¤æ˜“æ‰€åœ¨åŒºå—çš„å“ˆå¸Œå€¼ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>blockNumber</strong>:äº¤æ˜“æ‰€åœ¨åŒºå—çš„å—å·ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>from</strong>: äº¤æ˜“å‘èµ·è€…çš„åœ°å€ã€‚åœ¨è¿™é‡Œä¸ºaccouts[0]ã€‚</li>
<li><strong>gas</strong>:äº¤æ˜“å‘èµ·è€…æä¾›çš„gasã€‚</li>
<li><strong>gasPrice</strong>:äº¤æ˜“å‘èµ·è€…é…ç½®çš„gasä»·æ ¼ï¼Œå•ä½æ˜¯weiã€‚</li>
<li><strong>hash</strong>:äº¤æ˜“çš„å“ˆå¸Œå€¼ã€‚</li>
<li><strong>input</strong>:äº¤æ˜“é™„å¸¦çš„æ•°æ®ã€‚</li>
<li><strong>nonce</strong>:äº¤æ˜“çš„å‘èµ·è€…åœ¨ä¹‹å‰è¿›è¡Œè¿‡çš„äº¤æ˜“æ•°é‡ã€‚</li>
<li><strong>r</strong>:ç”¨äºäº§ç”Ÿæ ‡è¯†äº¤æ˜“å‘ç”Ÿè€…çš„ç­¾å(ECDSAç­¾åå€¼)</li>
<li><strong>s</strong>:ç”¨äºäº§ç”Ÿæ ‡è¯†äº¤æ˜“å‘ç”Ÿè€…çš„ç­¾å(ECDSAç­¾åå€¼)</li>
<li><strong>to</strong>:äº¤æ˜“æ¥æ”¶è€…çš„åœ°å€ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullï¼Œå¦‚æœæ˜¯éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„äº¤æ˜“ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯nullã€‚åœ¨è¿™é‡Œæ˜¾ç¤ºä¸ºaccouts[1]ã€‚</li>
<li><strong>transactionIndex</strong>:äº¤æ˜“åœ¨åŒºå—ä¸­çš„åºå·ã€‚å½“è¿™ä¸ªåŒºå—å¤„äºpendingå°†ä¼šè¿”å›nullã€‚</li>
<li><strong>v</strong>:ç”¨äºäº§ç”Ÿæ ‡è¯†äº¤æ˜“å‘ç”Ÿè€…çš„ç­¾å(ECDSAç­¾åå€¼)</li>
<li><strong>value</strong>:äº¤æ˜“é™„å¸¦çš„è´§å¸é‡ï¼Œå•ä½ä¸ºWeiã€‚åœ¨è¿™é‡Œå³æ˜¯è½¬è´¦çš„å€¼</li>
</ul>

<hr />

<h2 id="å…­-ç§æœ‰é“¾èŠ‚ç‚¹çš„åŠ å…¥-é€‰åš">å…­ã€ç§æœ‰é“¾èŠ‚ç‚¹çš„åŠ å…¥ï¼ˆé€‰åšï¼‰</h2>

<h3 id="6-1-åˆå§‹åŒ–å¦ä¸€ä¸ªç§æœ‰é“¾èŠ‚ç‚¹data1">6.1 åˆå§‹åŒ–å¦ä¸€ä¸ªç§æœ‰é“¾èŠ‚ç‚¹data1</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --datadir data1 init genesis.json</code></pre></div>
<h3 id="6-2-åŒæ—¶å¯åŠ¨ä¸¤ä¸ªç§æœ‰é“¾èŠ‚ç‚¹">6.2 åŒæ—¶å¯åŠ¨ä¸¤ä¸ªç§æœ‰é“¾èŠ‚ç‚¹</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --networkid <span style="color:#3677a9">1997</span> --nodiscover --datadir data0 --port <span style="color:#3677a9">30303</span> --rpc --rpcapi net,eth,web3,personal --rpcport <span style="color:#3677a9">8545</span> --rpcaddr localhost --verbosity <span style="color:#3677a9">6</span> console <span style="color:#3677a9">2</span>&gt;&gt;eth_output.log --ipcpath <span style="color:#ed9d13">&#34;geth0.rpc&#34;</span></code></pre></div><div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">geth --networkid <span style="color:#3677a9">1997</span> --nodiscover --datadir data1 --port <span style="color:#3677a9">55554</span> --rpc --rpcapi net,eth,web3,personal --rpcport <span style="color:#3677a9">8101</span> --rpcaddr localhost --verbosity <span style="color:#3677a9">6</span>  console <span style="color:#3677a9">2</span>&gt;&gt;eth_output2.log --ipcpath <span style="color:#ed9d13">&#34;geth1.rpc&#34;</span></code></pre></div>
<h3 id="6-3-æ·»åŠ èŠ‚ç‚¹">6.3 æ·»åŠ èŠ‚ç‚¹</h3>

<p>åœ¨<strong>data0</strong>èŠ‚ç‚¹ï¼šè·å–<strong>data0</strong>çš„<strong>enode</strong>ä¿¡æ¯</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; admin.nodeInfo.enode
<span style="color:#ed9d13">&#34;enode://74967083bfcb45cc0215b93127b9b8b5db17c0cbfa2dd88f9b741302fb025fe91157ca79bca46f309766cd10771ef8983d042d8d36dff3bc40cc1a697df6ba34@127.0.0.1:30303?discport=0&#34;</span></code></pre></div>
<p>åœ¨<strong>data1</strong>èŠ‚ç‚¹ï¼š</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;admin.addPeer(<span style="color:#ed9d13">&#34;enode://74967083bfcb45cc0215b93127b9b8b5db17c0cbfa2dd88f9b741302fb025fe91157ca79bca46f309766cd10771ef8983d042d8d36dff3bc40cc1a697df6ba34@127.0.0.1:30303?discport=0&#34;</span>)
true</code></pre></div>
<p><strong>addPeer()</strong>å‡½æ•°æ‹¬å·å†…å‚æ•°å¡«æŸ¥çœ‹åˆ°çš„<strong>data0</strong>çš„<strong>enode</strong>ä¿¡æ¯ï¼Œè¿”å›<strong>true</strong>å³å¯æˆåŠŸåŠ å…¥èŠ‚ç‚¹ï¼ŒåŠ å…¥å<strong>data1</strong>å°±ä¼šè‡ªåŠ¨å¼€å§‹åŒæ­¥<strong>data0</strong>çš„æ‰€æœ‰åŒºå—ã€‚</p>

<p>ä¹‹åå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹èŠ‚ç‚¹æ˜¯å¦æ·»åŠ æˆåŠŸï¼š</p>

<pre><code>net.peerCount
admin.peers
</code></pre>

<p>åœ¨data1ä½¿ç”¨<code>eth.blockNumber</code>æ¥æŸ¥çœ‹åŒºå—æ˜¯å¦åŒæ­¥æˆåŠŸã€‚</p>

    </div>
 
    <ul class="article-taxonomy">
                  
      <hr>
      <li>
        <i class="fa fa-category"></i><a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE">åŒºå—é“¾</a>
      </li>
      
    
      
      <li>
        <i class="fa fa-tags"></i><a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE">åŒºå—é“¾</a>
      </li>
      
  </article>

</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="https://sysucarey.github.io/index.xml" type="application/rss+xml" target="_blank"><i class="fa fa-rss"></i> RSS feed</a>
          </li>
          <li>
            <a href="https://github.com/SYSUcarey"><i class="fa fa-github"></i> Code</a>
          </li>
          <li>
            <a href="https://sysucarey.github.io/site-notice">Site notice</a>
          </li>
        </ul>
      </footer>

    </div>

  </body>
</html>

